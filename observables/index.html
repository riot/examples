<!doctype html>
<html>

  <head>
    <title>Observable Example: Observables</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  </head>

  <body>
    <car-key></car-key>
    <car-headlights></car-headlights>

    <!-- riot tags -->
    <script type="riot" src="car-key.riot"></script>
    <script type="riot" src="car-headlights.riot"></script>

    <!-- scripts we need -->
    <script src="https://cdn.jsdelivr.net/npm/@riotjs/observable@4.0.4/dist/observable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/riot@4/riot+compiler.min.js"></script>

    <!-- mount this app -->
    <script type="text/javascript">
      // factory function, you can use ES6 classes in alternative
      function Car(make, model) {
        const state = {
          make,
          model,
          started: false,
        }

        observable(state)

        state.on('start', () => {
          state.started = true
        })

        return state
      }

      // make a new Car instance
      var car = Car('Ford', 'Focus')

      riot.compile()
        .then(() => {
          riot.mount('car-key, car-headlights')
        })
    </script>
  </body>

</html>
